<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‘½è¿é»‘ç›’ Pro Max Â· å¤©å‘½æŒ‡å—</title>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.2.37/lunar.min.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #d4af37; /* éé‡‘è‰² */
            --bg: #f4f6f9;
            --card-bg: #ffffff;
            --text: #333;
            --border-radius: 12px;
            --wuxing-jin: #E6B33D;
            --wuxing-mu: #27AE60;
            --wuxing-shui: #2980B9;
            --wuxing-huo: #C0392B;
            --wuxing-tu: #8D6E63;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg);
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", serif;
            color: var(--text);
            margin: 0;
            padding: 20px 10px;
            line-height: 1.6;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0;
            font-size: 26px;
            color: var(--primary);
            letter-spacing: 2px;
        }
        .header p {
            margin: 5px 0 0;
            font-size: 13px;
            color: #7f8c8d;
            font-weight: 300;
        }

        /* å¡ç‰‡é€šç”¨ */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        /* è¾“å…¥è¡¨å• */
        .input-group { margin-bottom: 15px; }
        .label { display: block; font-weight: bold; margin-bottom: 8px; color: var(--primary); }
        input[type="datetime-local"], select {
            width: 100%;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            background: #fafafa;
        }
        
        .radio-group { display: flex; gap: 10px; }
        .radio-label {
            flex: 1; text-align: center; padding: 10px;
            background: #f0f0f0; border-radius: 8px; cursor: pointer;
            transition: 0.3s; color: #666; font-weight: 600;
        }
        input[type="radio"]:checked + .radio-label {
            background: var(--primary); color: #fff; box-shadow: 0 2px 8px rgba(44,62,80,0.3);
        }
        input[type="radio"] { display: none; }

        .btn-submit {
            width: 100%; padding: 15px;
            background: linear-gradient(135deg, #2c3e50, #434343);
            color: var(--accent);
            border: none; border-radius: 8px;
            font-size: 18px; font-weight: bold;
            cursor: pointer; transition: 0.2s;
        }
        .btn-submit:active { transform: scale(0.98); }

        /* ç»“æœåŒºåŸŸåŠ¨ç”» */
        #result-area { display: none; animation: fadeIn 0.6s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* æ ‡é¢˜æ  */
        .section-title {
            font-size: 16px; font-weight: 700; color: var(--primary);
            border-left: 4px solid var(--accent); padding-left: 10px;
            margin: 20px 0 15px; display: flex; align-items: center; justify-content: space-between;
        }

        /* å››æŸ±æ’ç›˜ç½‘æ ¼ */
        .bazi-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
        }
        .pillar {
            background: #f8f9fa; border: 1px solid #eee; border-radius: 8px;
            padding: 15px 5px; text-align: center;
        }
        .pillar-head { font-size: 12px; color: #999; margin-bottom: 5px; }
        .god-text { font-size: 11px; color: #666; height: 16px; }
        .gan-zhi {
            font-size: 24px; font-weight: bold; font-family: "KaiTi", serif;
            margin: 5px 0; line-height: 1.2;
        }
        /* è‡ªåé•¿ç”Ÿæ ·å¼ */
        .zhangsheng-tag {
            font-size: 11px; display: inline-block; padding: 2px 6px;
            background: rgba(0,0,0,0.05); border-radius: 4px; color: #555;
            margin-top: 5px; transform: scale(0.9);
        }
        
        /* æ·±åº¦åˆ†æç›’å­ */
        .deep-box {
            background: #fffbf0; border: 1px solid #f7ebd0;
            padding: 15px; border-radius: 8px; font-size: 14px;
        }
        .highlight { color: #d35400; font-weight: bold; }
        .tag-wang { background: #e8f5e9; color: #27ae60; padding: 2px 5px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .tag-shuai { background: #ffebee; color: #c0392b; padding: 2px 5px; border-radius: 4px; font-size: 12px; font-weight: bold; }

        /* äº”ç»´åˆ†æåˆ—è¡¨ */
        .dimension-item {
            margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px dashed #eee;
        }
        .dimension-item:last-child { border-bottom: none; margin-bottom: 0; }
        .dim-title { font-weight: bold; color: var(--primary); display: flex; align-items: center; gap: 8px; }
        .dim-content { margin-top: 6px; font-size: 14px; color: #444; text-align: justify; }
        
        /* äº”è¡Œé…è‰² */
        .wx-é‡‘ { color: var(--wuxing-jin); }
        .wx-æœ¨ { color: var(--wuxing-mu); }
        .wx-æ°´ { color: var(--wuxing-shui); }
        .wx-ç« { color: var(--wuxing-huo); }
        .wx-åœŸ { color: var(--wuxing-tu); }

    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>å‘½è¿é»‘ç›’ Pro Max</h1>
        <p>50å¹´ç»éªŒ Â· äººå…ƒå¸ä»¤ Â· äº”ç»´è§£å¯†</p>
    </div>

    <div class="card">
        <div class="input-group">
            <span class="label">æ€§åˆ« (Gender)</span>
            <div class="radio-group">
                <input type="radio" name="gender" id="g1" value="1" checked>
                <label for="g1" class="radio-label">ç”·å‘½ (ä¹¾é€ )</label>
                
                <input type="radio" name="gender" id="g0" value="0">
                <label for="g0" class="radio-label">å¥³å‘½ (å¤é€ )</label>
            </div>
        </div>
        
        <div class="input-group">
            <span class="label">å‡ºç”Ÿæ—¶é—´ (å…¬å†)</span>
            <input type="datetime-local" id="birthTime">
        </div>

        <button class="btn-submit" onclick="calculate()">æ­å¼€å¤©å‘½</button>
    </div>

    <div id="result-area">
        
        <div class="section-title">å…«å­—æ’ç›˜ Â· è‡ªåé•¿ç”Ÿ</div>
        <div class="card">
            <div class="bazi-grid" id="bazi-grid">
                </div>
            <div style="margin-top:15px; text-align:center; font-size:12px; color:#999;">
                * é•¿ç”ŸçŠ¶æ€ä¸ºè¯¥æŸ±å¤©å¹²å¯¹è¯¥æŸ±åœ°æ”¯çš„çŠ¶æ€ï¼ˆè‡ªåï¼‰ï¼Œä½“ç°å•æŸ±èƒ½é‡åœºã€‚
            </div>
        </div>

        <div class="section-title">çœŸç¥å¸ä»¤ Â· é—¨æ—ºåœ°è¡°è¾©è¯</div>
        <div class="card">
            <div class="deep-box" id="siling-box">
                </div>
        </div>

        <div class="section-title">äº”ç»´äººç”ŸæŒ‡å—</div>
        <div class="card">
            <div id="five-dimensions">
                </div>
        </div>
        
        <div style="height:50px; text-align:center; color:#ccc; font-size:12px;">Destiny Algorithm Â© 2025</div>
    </div>
</div>

<script>
    // é¡µé¢åŠ è½½æ—¶è®¾ç½®é»˜è®¤æ—¶é—´
    window.onload = function() {
        const now = new Date();
        const str = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
        document.getElementById('birthTime').value = str;
    }

    // æ ¸å¿ƒæ•°æ®ç»“æ„
    const WUXING_COLOR = { 'é‡‘':'wx-é‡‘', 'æœ¨':'wx-æœ¨', 'æ°´':'wx-æ°´', 'ç«':'wx-ç«', 'åœŸ':'wx-åœŸ' };
    
    // äººå…ƒå¸ä»¤å£è¯€è¡¨ (åœ°æ”¯ -> [[è—å¹², å¤©æ•°], ...])
    const SILING_RULES = {
        'å¯…': [['æˆŠ',7], ['ä¸™',7], ['ç”²',16]],
        'å¯': [['ç”²',10], ['ä¹™',20]],
        'è¾°': [['ä¹™',9], ['ç™¸',3], ['æˆŠ',18]],
        'å·³': [['æˆŠ',5], ['åºš',9], ['ä¸™',16]],
        'åˆ': [['ä¸™',10], ['å·±',9], ['ä¸',11]],
        'æœª': [['ä¸',9], ['ä¹™',3], ['å·±',18]],
        'ç”³': [['æˆŠ',7], ['å£¬',7], ['åºš',16]],
        'é…‰': [['åºš',10], ['è¾›',20]],
        'æˆŒ': [['è¾›',9], ['ä¸',3], ['æˆŠ',18]],
        'äº¥': [['æˆŠ',7], ['ç”²',5], ['å£¬',18]],
        'å­': [['å£¬',10], ['ç™¸',20]],
        'ä¸‘': [['ç™¸',9], ['è¾›',3], ['å·±',18]]
    };

    // åäºŒé•¿ç”ŸæŸ¥æ‰¾è¡¨ (å¤©å¹² -> å¯¹åº”åœ°æ”¯çš„é•¿ç”ŸçŠ¶æ€)
    // é¡ºåºï¼šé•¿ç”Ÿ,æ²æµ´,å† å¸¦,ä¸´å®˜,å¸æ—º,è¡°,ç—…,æ­»,å¢“,ç»,èƒ,å…»
    // åœ°æ”¯åºï¼šå­0, ä¸‘1, å¯…2, å¯3, è¾°4, å·³5, åˆ6, æœª7, ç”³8, é…‰9, æˆŒ10, äº¥11
    const ZHANGSHENG_MAP = {
        'ç”²': {11:'é•¿ç”Ÿ',0:'æ²æµ´',1:'å† å¸¦',2:'ä¸´å®˜',3:'å¸æ—º',4:'è¡°',5:'ç—…',6:'æ­»',7:'å¢“',8:'ç»',9:'èƒ',10:'å…»'},
        'ä¹™': {6:'é•¿ç”Ÿ',5:'æ²æµ´',4:'å† å¸¦',3:'ä¸´å®˜',2:'å¸æ—º',1:'è¡°',0:'ç—…',11:'æ­»',10:'å¢“',9:'ç»',8:'èƒ',7:'å…»'},
        'ä¸™': {2:'é•¿ç”Ÿ',3:'æ²æµ´',4:'å† å¸¦',5:'ä¸´å®˜',6:'å¸æ—º',7:'è¡°',8:'ç—…',9:'æ­»',10:'å¢“',11:'ç»',0:'èƒ',1:'å…»'},
        'ä¸': {9:'é•¿ç”Ÿ',8:'æ²æµ´',7:'å† å¸¦',6:'ä¸´å®˜',5:'å¸æ—º',4:'è¡°',3:'ç—…',2:'æ­»',1:'å¢“',0:'ç»',11:'èƒ',10:'å…»'},
        'æˆŠ': {2:'é•¿ç”Ÿ',3:'æ²æµ´',4:'å† å¸¦',5:'ä¸´å®˜',6:'å¸æ—º',7:'è¡°',8:'ç—…',9:'æ­»',10:'å¢“',11:'ç»',0:'èƒ',1:'å…»'}, // ç«åœŸåŒå®«
        'å·±': {9:'é•¿ç”Ÿ',8:'æ²æµ´',7:'å† å¸¦',6:'ä¸´å®˜',5:'å¸æ—º',4:'è¡°',3:'ç—…',2:'æ­»',1:'å¢“',0:'ç»',11:'èƒ',10:'å…»'},
        'åºš': {5:'é•¿ç”Ÿ',6:'æ²æµ´',7:'å† å¸¦',8:'ä¸´å®˜',9:'å¸æ—º',10:'è¡°',11:'ç—…',0:'æ­»',1:'å¢“',2:'ç»',3:'èƒ',4:'å…»'},
        'è¾›': {0:'é•¿ç”Ÿ',11:'æ²æµ´',10:'å† å¸¦',9:'ä¸´å®˜',8:'å¸æ—º',7:'è¡°',6:'ç—…',5:'æ­»',4:'å¢“',3:'ç»',2:'èƒ',1:'å…»'},
        'å£¬': {8:'é•¿ç”Ÿ',9:'æ²æµ´',10:'å† å¸¦',11:'ä¸´å®˜',0:'å¸æ—º',1:'è¡°',2:'ç—…',3:'æ­»',4:'å¢“',5:'ç»',6:'èƒ',7:'å…»'},
        'ç™¸': {3:'é•¿ç”Ÿ',2:'æ²æµ´',1:'å† å¸¦',0:'ä¸´å®˜',11:'å¸æ—º',10:'è¡°',9:'ç—…',8:'æ­»',7:'å¢“',6:'ç»',5:'èƒ',4:'å…»'}
    };
    
    // åœ°æ”¯ç´¢å¼•è¾…åŠ©
    const ZHI_INDEX = {'å­':0,'ä¸‘':1,'å¯…':2,'å¯':3,'è¾°':4,'å·³':5,'åˆ':6,'æœª':7,'ç”³':8,'é…‰':9,'æˆŒ':10,'äº¥':11};

    function calculate() {
        const timeStr = document.getElementById('birthTime').value;
        if (!timeStr) return alert("è¯·è¾“å…¥å‡ºç”Ÿæ—¶é—´");
        
        const date = new Date(timeStr);
        const gender = document.querySelector('input[name="gender"]:checked').value; // 1ç”· 0å¥³

        // 1. æ’ç›˜åˆå§‹åŒ–
        const solar = Solar.fromYmdHms(date.getFullYear(), date.getMonth()+1, date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());
        const lunar = solar.getLunar();
        const bazi = lunar.getEightChar();
        bazi.setSect(2); // è®¾ç½®æµæ´¾ï¼šæ™šå­æ—¶ç®—æ˜å¤©

        // 2. æ¸²æŸ“å››æŸ±
        renderPillars(bazi, gender);

        // 3. è®¡ç®—å¸ä»¤ä¸é—¨æ—ºåœ°è¡°
        const silingInfo = calcCommander(lunar, bazi);
        renderDeepAnalysis(bazi, silingInfo);

        // 4. äº”ç»´åˆ†æ
        renderFiveDimensions(bazi, silingInfo);

        // æ˜¾ç¤ºç»“æœ
        const resultArea = document.getElementById('result-area');
        resultArea.style.display = 'block';
        resultArea.scrollIntoView({ behavior: 'smooth' });
    }

    // --- åŠŸèƒ½å‡½æ•° ---

    function getSelfZhangSheng(ganName, zhiName) {
        if (!ZHANGSHENG_MAP[ganName]) return '';
        const idx = ZHI_INDEX[zhiName];
        return ZHANGSHENG_MAP[ganName][idx];
    }

    function renderPillars(bazi, gender) {
        const pillars = [
            { t: 'å¹´æŸ±', g: bazi.getYearGan(), z: bazi.getYearZhi() },
            { t: 'æœˆæŸ±', g: bazi.getMonthGan(), z: bazi.getMonthZhi() },
            { t: 'æ—¥æŸ±', g: bazi.getDayGan(), z: bazi.getDayZhi() },
            { t: 'æ—¶æŸ±', g: bazi.getTimeGan(), z: bazi.getTimeZhi() }
        ];

        let html = '';
        const dayMaster = bazi.getDayGan(); // æ—¥ä¸»

        pillars.forEach(p => {
            // åç¥ï¼ˆé’ˆå¯¹æ—¥ä¸»ï¼‰
            let god = '';
            if (p.t === 'æ—¥æŸ±') god = 'æ—¥ä¸»';
            else god = p.g.getShiShenGan(dayMaster).getName();

            // è‡ªåé•¿ç”Ÿ
            const zhangsheng = getSelfZhangSheng(p.g.getName(), p.z.getName());

            html += `
                <div class="pillar">
                    <div class="pillar-head">${p.t}</div>
                    <div class="god-text">${god}</div>
                    <div class="gan-zhi ${WUXING_COLOR[p.g.getWuXing()]}">${p.g.getName()}</div>
                    <div class="gan-zhi ${WUXING_COLOR[p.z.getWuXing()]}">${p.z.getName()}</div>
                    <div class="zhangsheng-tag">${zhangsheng}</div>
                </div>
            `;
        });
        document.getElementById('bazi-grid').innerHTML = html;
    }

    function calcCommander(lunar, bazi) {
        // è®¡ç®—è·ç¦»ä¸Šä¸€ä¸ªèŠ‚æ°”çš„å¤©æ•°
        const prevJie = lunar.getPrevJie();
        const jieSolar = prevJie.getSolar(); // èŠ‚æ°”æ—¶åˆ»
        const birthSolar = lunar.getSolar(); // å‡ºç”Ÿæ—¶åˆ»
        
        // ç®€å•è®¡ç®—å¤©æ•°å·®ï¼ˆå¿½ç•¥åˆ†ç§’ï¼Œå–æ•´å¤©æ•°ï¼‰
        const diffTime = Math.abs(birthSolar.getCalendar().getTime() - jieSolar.getCalendar().getTime());
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
        
        const monthZhi = bazi.getMonthZhi().getName();
        const rules = SILING_RULES[monthZhi] || [];
        
        let commander = 'æœªçŸ¥';
        let currentDay = 0;
        
        // éå†æŸ¥æ‰¾å½“ä»¤çœŸç¥
        for (let rule of rules) {
            currentDay += rule[1];
            if (diffDays <= currentDay) {
                commander = rule[0];
                break;
            }
        }
        // å¦‚æœè¶…è¿‡æœ€åä¸€å¤©ï¼Œå–æœ€åä¸€ä¸ª
        if (commander === 'æœªçŸ¥' && rules.length > 0) commander = rules[rules.length-1][0];

        return {
            diffDays: diffDays,
            commander: commander,
            prevJieName: prevJie.getName()
        };
    }

    function renderDeepAnalysis(bazi, info) {
        const dm = bazi.getDayGan();
        const dmWx = dm.getWuXing();
        
        const monthZhi = bazi.getMonthZhi();
        const monthWx = monthZhi.getWuXing();
        
        // å¸ä»¤äº”è¡Œï¼ˆç®€å•è½¬æ¢ï¼‰
        const ganWxMap = {'ç”²':'æœ¨','ä¹™':'æœ¨','ä¸™':'ç«','ä¸':'ç«','æˆŠ':'åœŸ','å·±':'åœŸ','åºš':'é‡‘','è¾›':'é‡‘','å£¬':'æ°´','ç™¸':'æ°´'};
        const cmdWx = ganWxMap[info.commander];

        // åˆ¤å®šå¸®æ‰¶ï¼ˆåŒæˆ‘è€…ã€ç”Ÿæˆ‘è€…ä¸ºæ—ºï¼‰
        const isHelp = (targetWx, selfWx) => {
            if (targetWx === selfWx) return true;
            if (targetWx === 'æœ¨' && selfWx === 'ç«') return true;
            if (targetWx === 'ç«' && selfWx === 'åœŸ') return true;
            if (targetWx === 'åœŸ' && selfWx === 'é‡‘') return true;
            if (targetWx === 'é‡‘' && selfWx === 'æ°´') return true;
            if (targetWx === 'æ°´' && selfWx === 'æœ¨') return true;
            return false;
        };

        const menWang = isHelp(monthWx, dmWx); // é—¨æ—ºï¼Ÿ
        const diWang = isHelp(cmdWx, dmWx);   // åœ°æ—ºï¼Ÿ

        let statusText = '';
        if (menWang && diWang) statusText = '<span class="tag-wang">é—¨åœ°åŒæ—º</span> <span class="highlight">èº«æå¼º</span>ï¼Œåº•æ°”åè¶³ï¼Œå¯æ‹…å¤§è´¢å¤§å®˜ã€‚';
        else if (menWang && !diWang) statusText = '<span class="tag-wang">é—¨æ—º</span> <span class="tag-shuai">åœ°è¡°</span> <span class="highlight">å¤–å¼ºä¸­å¹²</span>ï¼Œè¡¨é¢é£å…‰ï¼Œå†…é‡Œéœ€è¡¥æ°”ã€‚';
        else if (!menWang && diWang) statusText = '<span class="tag-shuai">é—¨è¡°</span> <span class="tag-wang">åœ°æ—º</span> <span class="highlight">ç»å¤„é€¢ç”Ÿ</span>ï¼Œå¹³æ—¶ä½è°ƒï¼Œå…³é”®æ—¶åˆ»æœ‰é å±±ã€‚';
        else statusText = '<span class="tag-shuai">é—¨åœ°ä¿±è¡°</span> <span class="highlight">çœŸèº«å¼±</span>ï¼Œéœ€å°æ¯”ç”Ÿæ‰¶ï¼Œä¸å¯ç¡¬æŠ—ã€‚';

        let html = `
            <div>ğŸ“… <b>èŠ‚æ°”å®šä½</b>ï¼š${info.prevJieName}åç¬¬ ${info.diffDays} å¤©</div>
            <div style="margin-top:5px;">ğŸ¦ <b>äººå…ƒå¸ä»¤</b>ï¼šå½“å‰ç”± <span class="highlight">${info.commander}${cmdWx}</span> æ‰§æ”¿æŒæƒã€‚</div>
            <div style="margin-top:10px; border-top:1px dashed #ddd; padding-top:10px;">
                ${statusText}
            </div>
        `;
        document.getElementById('siling-box').innerHTML = html;
        
        // è¿”å›ç»™äº”ç»´åˆ†æä½¿ç”¨
        info.dmWx = dmWx;
        info.cmdWx = cmdWx;
        info.isStrong = (menWang && diWang) || (menWang && !diWang); // ç®€å•å¼ºå¼±åˆ¤å®š
    }

    function renderFiveDimensions(bazi, info) {
        const dm = bazi.getDayGan();
        const dmWx = dm.getWuXing();
        
        // ç®€å•ç»Ÿè®¡äº”è¡Œ
        const wxCounts = {'é‡‘':0,'æœ¨':0,'æ°´':0,'ç«':0,'åœŸ':0};
        const allChars = [
            bazi.getYearGan(), bazi.getYearZhi(),
            bazi.getMonthGan(), bazi.getMonthZhi(),
            bazi.getDayGan(), bazi.getDayZhi(),
            bazi.getTimeGan(), bazi.getTimeZhi()
        ];
        allChars.forEach(c => wxCounts[c.getWuXing()]++);

        // æ‰¾æœ€å¼ºå’Œæœ€å¼±
        let maxWx = Object.keys(wxCounts).reduce((a, b) => wxCounts[a] > wxCounts[b] ? a : b);
        let minWx = Object.keys(wxCounts).reduce((a, b) => wxCounts[a] < wxCounts[b] ? a : b);

        // 1. äº‹ä¸š (å®˜æ€ + é£Ÿä¼¤)
        let careerText = "";
        if (info.isStrong) {
            careerText = "èº«å¼ºå–œå…‹æ³„ã€‚ä½ çš„äº‹ä¸šé€‚åˆ<b>æŠ€æœ¯ã€è¡¨è¾¾ã€é”€å”®</b>ï¼ˆé£Ÿä¼¤ç”Ÿè´¢ï¼‰æˆ–<b>ç®¡ç†ã€å…¬èŒ</b>ï¼ˆå®˜æ€æŠ¤èº«ï¼‰ã€‚æ ¸å¿ƒç«äº‰åŠ›åœ¨äºä½ çš„ä¸ªäººæ‰åï¼ˆé£Ÿä¼¤ï¼‰èƒ½å¦ä»å¸ä»¤çœŸç¥ä¸­é€å‡ºã€‚è‹¥ä¼¤å®˜é…å°ï¼Œæ›´æ˜¯è¡Œä¸šæƒå¨ã€‚";
        } else {
            careerText = "èº«å¼±å–œå°æ¯”ã€‚äº‹ä¸šä¸Šå®œ<b>å¯»æ±‚åˆä½œã€ä¾é å¹³å°</b>ã€‚ä¸å®œç‹¬è‡ªæ‰¿æ‹…è¿‡å¤§é£é™©ã€‚é€‚åˆä»äº‹æ–‡åŒ–ã€æ•™è‚²ã€æœåŠ¡æˆ–ç¨³å®šæ€§é«˜çš„åå°æ”¯æŒå·¥ä½œã€‚ä½ çš„è´µäººé€šå¸¸æ˜¯é•¿è¾ˆæˆ–ä¸Šå¸ã€‚";
        }

        // 2. è´¢è¿ (è´¢æ˜Ÿ + é£Ÿä¼¤)
        let wealthText = "";
        const wealthWxMap = {'æœ¨':'åœŸ', 'ç«':'é‡‘', 'åœŸ':'æ°´', 'é‡‘':'æœ¨', 'æ°´':'ç«'}; // æˆ‘å…‹è€…ä¸ºè´¢
        const wealthElement = wealthWxMap[dmWx];
        if (wxCounts[wealthElement] > 0) {
            wealthText = `å‘½å±€è‡ªå¸¦è´¢æ˜Ÿï¼ˆ${wealthElement}ï¼‰ã€‚è‹¥èº«å¼ºï¼Œè´¢æ°”é€šé—¨æˆ·ï¼Œå¯ç»å•†è‡´å¯Œï¼›è‹¥èº«å¼±ï¼Œéœ€é˜²â€œè´¢å¤šå‹èº«â€ï¼Œèµšå¾—å¤šèŠ±å¾—å¤šï¼Œå»ºè®®<b>å‚¨è“„ç½®ä¸š</b>ï¼Œç”¨ä¸åŠ¨äº§å®ˆè´¢ã€‚`;
        } else {
            wealthText = `åŸå±€è´¢æ˜Ÿä¸æ˜¾ï¼Œå¤šä¸º<b>æŠ€æœ¯æ±‚è´¢æˆ–åå£°æ±‚è´¢</b>ã€‚ä½ çš„è´¢å¯Œå¾€å¾€æ¥è‡ªâ€œé£Ÿä¼¤â€çš„è½¬åŒ–ï¼Œå³é ä¸€æŠ€ä¹‹é•¿æ¢å–å›æŠ¥ã€‚åˆ‡å¿ŒæŠ•æœºï¼Œæ­£è´¢å¾—ä½æ–¹ä¸ºé•¿ä¹…ä¹‹è®¡ã€‚`;
        }

        // 3. å©šå§» (æ—¥æ”¯ + è´¢å®˜)
        const dayZhi = bazi.getDayZhi();
        const zhangsheng = getSelfZhangSheng(dm.getName(), dayZhi.getName());
        let marryText = `æ—¥æ”¯å${dayZhi.getName()}ï¼ˆ${zhangsheng}ï¼‰ã€‚`;
        if (['é•¿ç”Ÿ','å¸æ—º','å»ºç¦„'].includes(zhangsheng)) {
            marryText += "é…å¶èƒ½åŠ›è¾ƒå¼ºï¼Œå¯¹ä½ æœ‰å®è´¨æ€§å¸®åŠ©ã€‚";
        } else if (['å¢“','ç»','ç—…'].includes(zhangsheng)) {
            marryText += "é…å¶èº«ä½“æˆ–è¿åŠ¿å¯èƒ½ç¨å¼±ï¼Œå©šå§»ä¸­ä½ éœ€è¦å¤šä»˜å‡ºåŒ…å®¹ã€‚";
        }
        // ç®€å•å†²åˆåˆ¤æ–­ï¼ˆä»¥æœˆæ”¯æ—¥æ”¯ä¸ºä¾‹ï¼‰
        if (bazi.getMonthZhi().getName() === dayZhi.getName()) marryText += " æ³¨æ„ï¼šæœˆæ—¥ä¼åŸï¼Œæ„Ÿæƒ…å®¹æ˜“æœ‰çº ç»“æ‹–å»¶ä¹‹è±¡ã€‚";

        // 4. å­å¥³ (æ—¶æŸ±)
        const timeZhi = bazi.getTimeZhi();
        const timeGan = bazi.getTimeGan();
        let childText = `æ—¶æŸ±ä¸º${timeGan.getName()}${timeZhi.getName()}ã€‚æ—¶æ”¯ä¸ºå­å¥³å®«ï¼Œ`;
        if (info.cmdWx === timeZhi.getWuXing()) {
            childText += "æ—¶æ”¯å¾—ä»¤ï¼Œå­å¥³èº«ä½“å¥åº·ï¼Œç”Ÿå‘½åŠ›æ—ºç››ã€‚æ™šå¹´å¯äº«å­å¥³ä¹‹ç¦ã€‚";
        } else {
            childText += "å­å¥³å®«è¾ƒä¸ºå¹³ç¨³ã€‚æ™šè¿ä¸»è¦çœ‹æ—¶æŸ±çº³éŸ³ä¸è°ƒå€™æ˜¯å¦å¾—å®œã€‚";
        }

        // 5. å¥åº· (æœ€å¼±äº”è¡Œ + è°ƒå€™)
        let healthText = `é‡ç‚¹å…³æ³¨äº”è¡Œ<b>${minWx}</b>å¯¹åº”çš„ç³»ç»Ÿã€‚`;
        if (minWx === 'æ°´') healthText += " éœ€æ³¨æ„è‚¾è„ã€æ³Œå°¿ç³»ç»ŸåŠè¡€æ¶²å¾ªç¯ã€‚";
        else if (minWx === 'ç«') healthText += " éœ€æ³¨æ„å¿ƒè„ã€è§†åŠ›åŠå°è‚ æ¶ˆåŒ–ã€‚";
        else if (minWx === 'æœ¨') healthText += " éœ€æ³¨æ„è‚èƒ†ã€ç­‹éª¨åŠç¥ç»ç³»ç»Ÿã€‚";
        else if (minWx === 'é‡‘') healthText += " éœ€æ³¨æ„è‚ºéƒ¨ã€å‘¼å¸é“åŠå¤§è‚ ã€‚";
        else if (minWx === 'åœŸ') healthText += " éœ€æ³¨æ„è„¾èƒƒæ¶ˆåŒ–åŠçš®è‚¤é—®é¢˜ã€‚";
        
        // è°ƒå€™æç¤º
        if (['äº¥','å­','ä¸‘'].includes(bazi.getMonthZhi().getName()) && wxCounts['ç«'] === 0) {
            healthText += " <br>âš ï¸ <b>å‘½å±€åå¯’</b>ï¼šç”Ÿäºå†¬æœˆä¸”ç¼ºç«ï¼ŒåŠ¡å¿…å¤šæ™’å¤ªé˜³ï¼Œè¿åŠ¨å‡é˜³ï¼Œé˜²å¯’æ¹¿ä¹‹ç—‡ã€‚";
        }
        if (['å·³','åˆ','æœª'].includes(bazi.getMonthZhi().getName()) && wxCounts['æ°´'] === 0) {
            healthText += " <br>âš ï¸ <b>å‘½å±€åç‡¥</b>ï¼šç”Ÿäºå¤æœˆä¸”ç¼ºæ°´ï¼Œéœ€è¡¥æ°´æ¶¦å±€ï¼Œé˜²ä¸Šç«ç‚ç—‡ï¼Œæ³¨æ„æƒ…ç»ªè°ƒèŠ‚ã€‚";
        }

        const html = `
            <div class="dimension-item">
                <div class="dim-title">ğŸš€ äº‹ä¸šæ ¼å±€</div>
                <div class="dim-content">${careerText}</div>
            </div>
            <div class="dimension-item">
                <div class="dim-title">ğŸ’° è´¢å¯Œè¿åŠ¿</div>
                <div class="dim-content">${wealthText}</div>
            </div>
            <div class="dimension-item">
                <div class="dim-title">ğŸ’ å©šå§»æƒ…æ„Ÿ</div>
                <div class="dim-content">${marryText}</div>
            </div>
            <div class="dimension-item">
                <div class="dim-title">ğŸ‘¶ å­å¥³æ™šè¿</div>
                <div class="dim-content">${childText}</div>
            </div>
            <div class="dimension-item">
                <div class="dim-title">ğŸ’ª å¥åº·è°ƒå€™</div>
                <div class="dim-content">${healthText}</div>
            </div>
        `;
        document.getElementById('five-dimensions').innerHTML = html;
    }

</script>

</body>
</html>
